<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .employee-card{
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            transition: transform 0.2s ease;
        }
        .employee-card:hover{
            transform: translateY(-2px) ;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);
        }

        .employee-name{
            color: rgb(39, 25, 230);
        }

        .employee-info{
            color: #666;
            margin: 3px 0;
        }

        .section{

        }
        .section h2{

        }
        button{
            background: #007bff;
            color: white;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover{
            opacity: 0.7;
            box-shadow: 0 4px 14px grey;
        }

        .output{
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            white-space: pre-line;
        }
    </style>
</head>



<body>
    <div id="employeeList" ></div>

    <div class="employee-card">
        <button onclick="displayAllEmployees()">1. ì „ì§ì›í™•ì¸</button>
        <input  type="text" id="department" class="employee-card" placeholder="ë¶€ì„œëª…"></input>
        <button onclick= "displayEmployeeByDepartment()">ì¡°íšŒ</button>
        <button onclick="displayOddPositionedEmployee()">3. í™€ìˆ˜ ë²ˆì§¸ ì§ì›í™•ì¸</button>
        <button onclick="DemonstrateIndexUsage()">4. ì „ì§ì›ìˆ˜</button>
        <button onclick="rank()">5. ì§ê¸‰ìˆœìœ„</button>
        <button onclick="calculateFullYear()">5. ì§ì›ë³„ ì—°ì°¨ê³„ì‚°</button>
        <div id="output" class="employee-card"></div>
        
    </div>





    <script>
        //ì§ì› ë°ì´í„° êµ¬ì¡°
        class employees2{
            constructor(id = 1, name = 'í™ê¸¸ë™', department= 'ê°œë°œíŒ€', position= 'ê°œë°œì', salary= 55000000, email= '@choongang.com', phone= '010-1234-5678', hireDate= '2020-03-15'){
                this.id = id;
                this.name = name;
                this.department = department;
                this.position = position;
                this.salary = salary.toLocaleString();
                this.email = email;
                this.phone = phone;
                this.hireDate = hireDate;
            }
        }




        window.onload = function(){
            displayEmployeeCards();
        }





        let employee = new employees2();
        let employee2 = new employees2(2,'ì´ìë¼', 'ê°œë°œíŒ€','í’€ìŠ¤íƒê°œë°œì','70000000','kwon1@gmail.com','010-1234-5678','2023-04-15');
        let employee3 = new employees2(3,'í™ë•ê·œ', 'ë§ˆì¼“íŒ…íŒ€','ë§ˆì¼“íŒ…ë‹´ë‹¹ì','50000000','kwon2@gmail.com','010-4321-5678','2022-04-15');
        let employee4 = new employees2(4,'ììš°ë¦¼', 'ë§ˆì¼“íŒ…íŒ€','ë§ˆì¼“íŒ…ë‹´ë‹¹ì','65000000','kwon3@gmail.com','010-1234-8765','2015-04-15');
        let employee5 = new employees2(4,'ìœ ì˜ê·œ', 'íšŒê³„íŒ€','íšŒê³„ì‚¬','65000000','kwon3@gmail.com','010-1234-8765','2025-04-15');
        let employee6 = new employees2(4,'ê³„ë‘ì‹', 'íšŒê³„íŒ€','íšŒê³„ì‚¬','65000000','kwon3@gmail.com','010-1234-8765','2023-04-15');
        let employeesArr = [employee,employee3,employee2,employee4, employee5, employee6];





        function displayEmployeeCards(){
            let html = '';
            const container = document.getElementById('employeeList');

            employeesArr.forEach((employee, index) => {
                html += `
                <div class = "employee-card">
                    <div class ="employee-name">ì´ë¦„: ${employee.name} (${employee.position})</div>
                    <div class ="employee-info">ë¶€ì„œ: ${employee.department}</div>
                    <div class ="employee-info">ê¸‰ì—¬: ${employee.salary.toLocaleString()}</div>
                    <div class ="employee-info">ì´ë©”ì¼: ${employee.email}</div>
                    <div class ="employee-info">ë²ˆí˜¸: ${employee.phone}</div>
                    <div class ="employee-info">ì…ì‚¬ì¼: ${employee.hireDate}</div>
                    <p></p>
                </div>`;
            })

            container.innerHTML = html;
            console.log('ì •ë³´ ë¡œë”© ì™„ë£Œ');
        };




        //ì „ì²´ ì§ì› ëª©ë¡ì„ í™”ë©´, ì½˜ì†”ì— ì¶œë ¥
        function displayAllEmployees(){
            const output = document.getElementById('output');
            let result = `----ì „ì²´ ì§ì› ëª©ë¡----<p>`;

            employeesArr.forEach((employee)=>{
                result += `${employee.name} - ${employee.position} <p>`
                console.log(`${employee.name} - ${employee.position}<p>`)
            });
            output.innerHTML = result;
        }



        //ì–´ëŠ í•œ ë°°ì—´ì—ì„œ í•œ ë¶€ì„œì—ì„œ í•´ë‹¹ëœ ì‚¬ëŒì„ ë°°ì—´ë¡œ ì¶œë ¥ 
        function findDepartmentFromAll(departmentName){
            let arr = [];

            employeesArr.forEach((employee) => {
                if(employee.department == departmentName){
                    arr.push(employee);
                    console.log(arr);
                }
            })
            return arr;
        }




        function findDepartmentFromArray(departmentName, array1){

            let arr = [];

            console.log(`${Array.isArray(array1)} --- error check ------------------- `);

            for(let i = 0; i < array1.length; i++){
                if(array1[i].department === departmentName){
                    arr.push(array1[i]);
                }
            }
            if(arr.length !== 0){
                return `${departmentName}: ${arr.length}`;
            }else{
                return ` `;
            }
        }




        function displayEmployeeByDepartment(){
            const output = document.getElementById("output");
            const department = document.getElementById("department");
            let result = `====ë¶€ì„œë³„ ì§ì› í˜„í™©====`;

            if(department.value === null){
                output.innerHTML = 'ë¶€ì„œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'
            }else{
                let name = findDepartmentFromAll(department.value);

                name.forEach((employee)=>{
                    result += `
                        <div class ="employee-name">ì´ë¦„: ${employee.name} (${employee.position})</div>
                        <div class ="employee-info">ë¶€ì„œ: ${employee.department}</div>
                        <div class ="employee-info">ê¸‰ì—¬: ${employee.salary.toLocaleString()}</div>
                        <div class ="employee-info">ì´ë©”ì¼: ${employee.email}</div>
                        <div class ="employee-info">ë²ˆí˜¸: ${employee.phone}</div>
                        <div class ="employee-info">ì…ì‚¬ì¼: ${employee.hireDate}</div>
                        <p></p>`;
                })
                output.innerHTML = result;
            }
        }





        function displayOddPositionedEmployee(){
            const output = document.getElementById('output');
            let oddPositionedArr = [];
            let count = 0;
            let totalIncome = 0;
            let result = 
            `
            <p>====í™€ìˆ˜ ë²ˆì§¸ ì§ì›ë“¤====</p>
            <p>ì¡°ê±´: ëª©ë¡ì—ì„œ í™€ìˆ˜ ë²ˆì§¸ ìœ„ì¹˜ (1,3,5ë²ˆì¨°)ì— ìˆëŠ” ì§ì›</p>
            í™€ìˆ˜ ë²ˆì¨° ì§ì› ëª©ë¡:
            `;


            for(let i = 0; i < employeesArr.length; i++){
                if(i % 2 === 0){
                    result += `<div class ="employee-name">${i+1}ë²ˆì§¸: ${employeesArr[i].name} </div>
                        <div class ="employee-info">ì§ì±…: ${employeesArr[i].position}</div>
                        <div class ="employee-info">ë¶€ì„œ: ${employeesArr[i].department}</div>
                        <div class ="employee-info">ê¸‰ì—¬: ${employeesArr[i].salary.toLocaleString()}</div>
                        <p></p>`;
                        count++;
                        totalIncome += parseInt(employeesArr[i].salary);
                        oddPositionedArr.push(employeesArr[i]);
                }
            }   


            result += 
            `
            <div>í™€ìˆ˜ ë²ˆì¨° ì§ì› í†µê³„:</div>
            <div>ì´ ì¸ì›: ${count}ëª…</div>
            <div>ì´ ê¸‰ì—¬: ${totalIncome.toLocaleString()}ì›</div>
            <div>í‰ê·  ê¸‰ì—¬: ${parseInt(totalIncome / count).toLocaleString()}ì›</div>
            <p></p>
            <div>ë¶€ì„œë³„ ë¶„í¬: </div>
            <div>${findDepartmentFromArray('ê°œë°œíŒ€', oddPositionedArr)}</div>
            <div>${findDepartmentFromArray('ë§ˆì¼“íŒ…íŒ€', oddPositionedArr)}</div>
            <div>${findDepartmentFromArray('íšŒê³„íŒ€', oddPositionedArr)}</div>
            `

            console.log(result);
            output.innerHTML = result;
        }


        function DemonstrateIndexUsage(){
            let result = `<p>====ì¸ë±ìŠ¤ í™œìš© íŒ¨í„´====</p>`;
            let first;
            let last;





            result += `<div>forEachì—ì„œ ì¸ë±ìŠ¤ë¥¼ í™œìš”í•˜ëŠ” ë‹¤ì–‘í•œ íŒ¨í„´</div>`;
            //ìˆœë²ˆí‘œì‹œ 1ë¶€í„° ê°€ì¥ ê¸°ë³¸ì ì¸ íŒ¨í„´
            employeesArr.forEach((employee, index)=>{
                result += `<div>${index+1}ë²ˆ. ${employee.name}ë‹˜ </div>`;
            });



        

            result += `<p></p><div>ì²« ë²ˆì§¸/ë§ˆì§€ë§‰ ìš”ì†Œ íŠ¹ë³„ ì²˜ë¦¬: </div>`
            employeesArr.forEach((element, index, array)=>{
                if(index === 0 ){
                    first = `<div>ğŸ¥‡ì²« ë²ˆì§¸: ${array[index].name} </div>`;
                    result += first;
                }else if(index === (array.length-1)){
                    last = `<div>ğŸë§ˆì§€ë§‰: ${array[array.length-1].name} </div>`;
                    result += last;
                }else{
                    result += `<div>ğŸ‘¤${array[index].name}</div>`;     
                }
            })
            


            result += `<p></p><div>ì§ìˆ˜/í™€ìˆ˜ ì¸ë±ìŠ¤ êµ¬ë¶„: </div>`;
            employeesArr.forEach((employee, index, array)=>{
                if(index % 2 == 0){
                    result += `<div>âšªì§ìˆ˜ ì¸ë±ìŠ¤[${index}]: ${employee.name}</div>`
                }else{
                    result += `<div>âš«í™€ìˆ˜ ì¸ë±ìŠ¤[${index}]: ${employee.name}</div>`
                }   
            })


            let pivot = 0;
            let pivotIndex = 0;
            let group = [];
            result += `ê·¸ë£¹ ë‹¨ìœ„ ì²˜ë¦¬(3ëª…ì”©):`;
            employeesArr.forEach((employee, index, array)=>{
                employeesArr.forEach((employee, index)=>{
                    if(Math.floor(index / 3) <= 0){
                        index = pivotIndex;
                        group[pivot].push(array[index]);
                    }
                })


            })

            document.getElementById("output").innerHTML = result;
        }



        function calculateFullYear(){

                let result = `<div>===ì§ì›ë³„ ì—°ì°¨ ê³„ì‚°===</div> <p></p>`
                let date = new Date();
                let currentYear = date.getFullYear();                
                let totalWorked = 0;
                let expert = 0;
                let newbie = 0;


                result += `<div>ğŸ“…ê¸°ì¤€ ì—°ë„ : ${currentYear}ë…„</div><p></p>`;
                result += `<div>ğŸ˜ï¸ì§ì›ë³„ ê·¼ë¬´ ì—°ì°¨</div>`;

                employeesArr.forEach((employee, index, array)=>{
                    let sliced;
                    let exp;
                    sliced = parseInt(array[index].hireDate.slice(0,4));
                    let yearWorked = currentYear - sliced;
                    totalWorked += yearWorked;

                    if(yearWorked < 3){
                        exp = ' ğŸ¤ ì‹ ì…';
                        newbie++;
                    }else if(yearWorked >= 3 && yearWorked < 5){
                        exp = ' ğŸ’ª ìˆ™ë ¨ì';
                        expert++;
                    }else if(yearWorked >= 5){
                        exp = ' ğŸ† ë² í…Œë‘';
                        expert++;
                    }
                    


                    result += `<div>${index+1} ${employee.name}: ${yearWorked}ë…„ì°¨ ${exp}</div>`;
                    result += `<div>ì…ì‚¬ì¼: ${employee.hireDate}</div>`;
                    result += `<div>ë¶€ì„œ: ${employee.department}</div><p></p>`;
                })

                result += `<div>í†µê³„ ì •ë³´</div>`;
                result += `<div>í‰ê·  ê·¼ë¬´ ì—°ì°¨: ${parseFloat(totalWorked / employeesArr.length).toFixed(1)}ë…„</div>`;
                result += `<div>ìˆ™ë ¨ ì§ì› ìˆ˜: ${expert}ëª… (3ë…„ì°¨ ì´ìƒ)</div>`;
                result += `<div>ì‹ ì…/ê²½í—˜ì: ${newbie}ëª…</div>`;

                document.getElementById('output').innerHTML = result;
        }

            

    </script>
</body>
</html>